# Créer un Dashboard optimisé

### 💡 Utiliser le streaming pour un dashboard optimisé

## 📝 Tes notes

Detaille ce que tu as appris ici, sur une page [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Dans un premier temps nous allons créer un `dashboard` une route qui contiendra les 2 graphiques

.

## Exercice

- **🐶 Dans cet exercice tu va devoir implémenter la route `dashboard` qui contiendra les `queryParam` nécessaires.**
- **Faire les appels aux services nécessaires**
- Afficher les 2 Charts

PS : Nous avons ajouter de la latence dans les repositories volontairement pour ensuite l’optimiser via le streaming (exo suivant)

- 3 seconde pour `Health`
- 5 pour `Finance`

```tsx
export const getYearsHealthsByUid = async (uid: string) => {
  await new Promise((resolve) => setTimeout(resolve, 3000))
export const getYearsFinancesByUid = async (uid: string) => {
  await new Promise((resolve) => setTimeout(resolve, 5000))
```

Fichiers

- `app/(apps)/dashboard/page.tsx`

## Bonus

### 1. 🚀 Optimisation : Streaming

Les `Dashboards` sont souvent gourmant en ressources (Beacoup d’appels en base de de données / Calcul / agrégation etc … ) ce qui rend leur affichage plus ou moins long.

Certains graphiques peuvent être rapide , d’autres plus longs. Dans le Dashboard précèdent l’affichage de la page arrive à la fin du graphique le plus long.

- **🐶 Dans cet exercice tu vas devoir utiliser le streaming**

Pour gagner du temps nous avons découper en deux RSC distinct (qui contiennent les appels à la base de données )

- `finance-chart.tsx (<FinanceChart>)`
- `finance-chart.tsx` `(<HealthChart>)`

Utilise `<Suspense>` pour gérer le streaming

```tsx
<Suspense fallback={<ChartBodySkeleton />}>
    <LongReactServerComposant />
</Suspense>
```

ps : `ChartBodySkeleton` est un skeleton disponible pour les charts

Fichiers

- `app/(apps)/dashboard/page.tsx`

###

## Aller plus loin

📑 Le lien vers la doc [https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming](https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming)

## Ils vont t’aider

- **🐶 Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **🤖 Ash le Robot** : _Ash le Robot te donnera du code utile._
- **🚀 Julia La roquette** : _Julia te donnera des défis supplémentaires._
- **⛏️ Hulk le Marteau** : _Quand du code à supprimer est présent_
- **👨‍✈️ Hugo le chef de projet** : _Va t'aider sur les spécifications du projet_

## 🐜 Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20Mastery&entry.1430994900=8.SAAS%20Entrepreneur&entry.533578441=10%20dashbaord-streaming).
