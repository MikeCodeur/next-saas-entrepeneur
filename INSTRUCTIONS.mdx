# CrÃ©er un Dashboard optimisÃ©

### ğŸ’¡ Utiliser le streaming pour un `dashboard` optimisÃ©

## ğŸ“ Tes notes

DÃ©taille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Dans un premier temps, nous allons crÃ©er un `dashboard`, une route qui contiendra les 2 graphiques.

## Exercice

- **ğŸ¶** Dans cet exercice, tu va devoir implÃ©menter la route **`dashboard`** qui contiendra les **`queryParam`** nÃ©cessaires.
- Faire les appels aux services nÃ©cessaires. \*\*\*\*
- Afficher les 2 Charts.

PS : Nous avons ajoutÃ© de la latence dans les repositories volontairement pour ensuite lâ€™optimiser via le streaming (exercice suivant)

- 3 secondes pour `Health`
- 5 secondes pour `Finance`

```tsx
export const getYearsHealthsByUid = async (uid: string) => {
  await new Promise((resolve) => setTimeout(resolve, 3000))
export const getYearsFinancesByUid = async (uid: string) => {
  await new Promise((resolve) => setTimeout(resolve, 5000))
```

Fichiers

- `app/(apps)/dashboard/page.tsx`

## Bonus

### 1. ğŸš€ Optimisation : Streaming

Les `Dashboards` sont souvent gourmands en ressources (beaucoup dâ€™appels en base de donnÃ©es / Calcul / agrÃ©gation etcâ€¦ ) ce qui rend leur affichage plus ou moins long.

Certains graphiques peuvent Ãªtre rapides, dâ€™autres plus longs. Dans le Dashboard prÃ©cÃ©dent, lâ€™affichage de la page arrive Ã  la fin du graphique le plus long.

- **ğŸ¶** Dans cet exercice, tu vas devoir utiliser le streaming. \*\*\*\*

Pour gagner du temps, nous avons dÃ©coupÃ© en deux `RSC` distincts (qui contiennent les appels Ã  la base de donnÃ©es )

- `finance-chart.tsx (<FinanceChart>)`
- `finance-chart.tsx` `(<HealthChart>)`

Utilise `<Suspense>` pour gÃ©rer le streaming.

```tsx
<Suspense fallback={<ChartBodySkeleton />}>
    <LongReactServerComposant />
</Suspense>
```

PS : `ChartBodySkeleton` est un skeleton disponible pour les charts.

Fichiers

- `app/(apps)/dashboard/page.tsx`

## Aller plus loin

ğŸ“‘ Le lien vers la doc [https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming](https://nextjs.org/docs/app/building-your-application/routing/loading-ui-and-streaming)

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand du code Ã  supprimer est prÃ©sent_
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Va t'aider sur les spÃ©cifications du projet_

## ğŸœ Feedback

Remplir le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20Mastery&entry.1430994900=9.SAAS%20Entrepreneur&entry.533578441=10%20dashbaord-streaming).
