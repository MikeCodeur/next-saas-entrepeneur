# Actions conditionnÃ©es au RBAC

### ğŸ’¡ Actions conditionnÃ©es aux RÃ´les

## ğŸ“ Tes notes

DÃ©taille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Dans une application, il arrive souvent que des actions soient conditionnÃ©es aux diffÃ©rents utilisateurs. Exemple, un `admin` a plus dâ€™options quâ€™un `user`. Mais un `user` peut faire des actions sur ses propres `donnÃ©es`.

Nous allons utiliser les fonctions que nous avons maintenant Ã  notre disposition dans le service `autorisation` pour gÃ©rer plus finement les actions dans lâ€™application.

Par exemple, toutes les fonctions :

- `canCreateXXX`
- `isConnectedUserAdmin`
- etcâ€¦

## Exercice

**ğŸ¶** Dans cet exercice, tu vas devoir conditionner lâ€™affichage des boutons dâ€™ajout :

- `Tracker un Ã©lÃ©ment de santÃ©`
- `Tracker une dÃ©pense / revenus`

De telle maniÃ¨re que les personnes sur la partie publique ne puissent pas avoir ces boutons (sauf le propriÃ©taire ou lâ€™admin)

Fichiers

- `/components/dashboard/trackers/finance/finance-data-table.tsx`
- `/components/dashboard/trackers/health/health-data-table.tsx`

## Bonus

### 1. ğŸš€ Masquer des colonnes dâ€™actions

**ğŸ¶** Dans cet exercice, tu vas devoir conditionner lâ€™affichage des colonnes en fonction de la permission.

Pour cela, tu vas devoir adapter `finance-columns` et `health-columns` pour contenir :

- Une liste de colonnes pour les `users` standards.
- Une liste de colonnes pour les `users` ayant plus de droits.

Et conditionner les colonnes dans `finance-data-table` et `health-data-table`

Fais des tests dans les diffÃ©rents cas :

- Un `admin` accÃ¨de aux donnÃ©es publiques.
- Un `user` accÃ¨de aux donnÃ©es publiques (dâ€™autres `users`).
- Un `user` accÃ¨de aux donnÃ©es publiques (les siennes).

Fichiers

- `/components/dashboard/trackers/finance/finance-columns.tsx`
- `/components/dashboard/trackers/health/health-columns.tsx`
- `/components/dashboard/trackers/finance/finance-data-table.tsx`
- `/components/dashboard/trackers/health/health-data-table.tsx`

### 2. ğŸš€ Adapter les routes `finance`/ `health` publiques

**ğŸ¶** Dans cet exercice, tu vas devoir adapter les routes publiques pour les `users` nâ€™ayant pas de donnÃ©es.

Au lieu dâ€™afficher `Pas de rÃ©sultat`, un `admin` ou `proprietaire` verra un tableau vide et pourra le remplir.

## Aller plus loin

ğŸ“‘ Le lien vers la doc clerk rbac [https://clerk.com/docs/references/nextjs/basic-rbac](https://clerk.com/docs/references/nextjs/basic-rbac)

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand du code Ã  supprimer est prÃ©sent_
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Va t'aider sur les spÃ©cifications du projet_

## ğŸœ Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20Mastery&entry.1430994900=9.SAAS%20Entrepreneur&entry.533578441=14%20rbac-actions).
